(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{9263:(e,t,s)=>{Promise.resolve().then(s.bind(s,4536))},4536:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(5155),a=s(7108),r=s(8094),n=s(9335),i=s(8715),d=s(3463),c=s(2115),o=s(5446),x=s(8183),m=s(862);let h={uploading:{label:"Uploading",className:"bg-amber-50 text-amber-700",dot:"bg-amber-400"},success:{label:"Accepted",className:"bg-emerald-50 text-emerald-700",dot:"bg-emerald-500"},error:{label:"Error",className:"bg-rose-50 text-rose-700",dot:"bg-rose-500"}},p=e=>{if(!Number.isFinite(e))return"—";if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024)),s=e/Math.pow(1024,t);return"".concat(s.toFixed(s>9||0===t?0:1)," ").concat(["B","KB","MB","GB"][t])};function u(){var e,t,s,u;let[b,f]=(0,c.useState)([]),[g,j]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[N,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=(0,m.cB)();f(e),j(t=>{var s,l;return null!==(l=null!=t?t:null===(s=e[0])||void 0===s?void 0:s.id)&&void 0!==l?l:null}),y(!0)},[]),(0,c.useEffect)(()=>{N&&(0,m.Vj)(b)},[b,N]);let k=(0,c.useMemo)(()=>{var e;return null!==(e=b.find(e=>e.id===g))&&void 0!==e?e:null},[b,g]);(0,c.useEffect)(()=>{!g&&b.length&&j(b[0].id)},[b,g]);let A=e=>{f(t=>{let s=t.filter(t=>t.id!==e);return 0===s.length?j(null):g===e&&j(s[0].id),s})},_=async e=>{if(!e.cleansedId){window.alert("Download is available after the backend returns a cleansed ID.");return}w(e.id);try{var t,s;let l=await fetch("/api/ingestion/resume/".concat(encodeURIComponent(e.cleansedId)),{method:"POST"}),a=await l.json();if(!l.ok)throw Error(null!==(s=null==a?void 0:a.error)&&void 0!==s?s:"Backend rejected the download request.");let r="object"==typeof a.body&&null!==a.body?JSON.stringify(a.body,null,2):"string"==typeof a.rawBody&&a.rawBody.trim()?a.rawBody:JSON.stringify(a,null,2),n=new Blob([r],{type:"application/json"}),i=(null===(t=e.name.split("/").pop())||void 0===t?void 0:t.replace(/[^\w.-]+/g,"_"))||"upload",d="".concat(i,"-").concat(e.cleansedId,".json"),c=URL.createObjectURL(n),o=document.createElement("a");o.href=c,o.download=d,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(c)}catch(e){console.error("Unable to download upload payload.",e),window.alert(e instanceof Error?e.message:"Unable to download this upload. Please try again later.")}finally{w(t=>t===e.id?null:t)}};return(0,l.jsxs)(o.l,{currentStep:"ingestion",children:[(0,l.jsx)(x.F,{title:"Upload activity",description:"Review previous uploads, download payloads, and inspect metadata captured during ingestion."}),(0,l.jsxs)("main",{className:"mx-auto grid max-w-6xl gap-6 px-6 py-10 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)]",children:[(0,l.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Upload history"}),(0,l.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Recent files"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 rounded-full bg-slate-50 px-3 py-1 text-xs text-slate-600",children:[(0,l.jsx)(a.A,{className:"size-4 text-slate-500"}),b.length?"".concat(Math.min(b.length,25)," tracked"):"No uploads tracked yet"]})]}),(0,l.jsxs)("div",{className:"mt-6 space-y-4",children:[0===b.length&&(0,l.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 py-10 text-center text-sm text-slate-500",children:"Uploads will appear here once you submit files from the ingestion screen."}),b.map(e=>{let t=h[e.status],s=v===e.id,a=g===e.id;return(0,l.jsxs)("div",{className:(0,d.A)("rounded-2xl border px-4 py-3 transition",a?"border-slate-900 bg-slate-900/[0.04] shadow-[0_18px_35px_rgba(15,23,42,0.08)]":"border-slate-100 bg-slate-50 hover:border-slate-300"),children:[(0,l.jsxs)("button",{type:"button",onClick:()=>j(e.id),className:"flex w-full flex-wrap items-center justify-between gap-4 text-left",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"rounded-2xl bg-white p-2 shadow-sm",children:(0,l.jsx)(r.A,{className:"size-5 text-slate-500"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:[new Date(e.createdAt).toLocaleString()," • ",e.source]})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsxs)("span",{className:(0,d.A)("inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold",t.className),children:[(0,l.jsx)("span",{className:(0,d.A)("size-2 rounded-full",t.dot)}),t.label]})})]}),(0,l.jsxs)("div",{className:"mt-3 flex items-center justify-end gap-2 border-t border-slate-100 pt-3",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>_(e),disabled:s,className:(0,d.A)("inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold text-slate-900 transition hover:bg-slate-900/10",s&&"cursor-wait opacity-60"),children:[(0,l.jsx)(n.A,{className:"size-4"}),"Download"]}),(0,l.jsxs)("button",{type:"button",onClick:()=>A(e.id),className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold text-slate-900 transition hover:bg-slate-900/10",children:[(0,l.jsx)(i.A,{className:"size-4"}),"Delete"]})]})]},e.id)})]})]}),(0,l.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"File metadata"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:k?k.name:"Select an upload"})]}),k&&(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-400",children:k.source})]}),k?(0,l.jsxs)("div",{className:"mt-5 space-y-5",children:[(0,l.jsxs)("dl",{className:"grid gap-4 sm:grid-cols-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Uploaded"}),(0,l.jsx)("dd",{className:"text-sm font-semibold text-slate-900",children:new Date(k.createdAt).toLocaleString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Size"}),(0,l.jsx)("dd",{className:"text-sm font-semibold text-slate-900",children:p(k.size)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Source type"}),(0,l.jsx)("dd",{className:"text-sm font-semibold text-slate-900",children:null!==(e=k.sourceType)&&void 0!==e?e:k.source})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Source identifier"}),(0,l.jsx)("dd",{className:"text-sm font-semibold text-slate-900 break-all",children:null!==(t=k.sourceIdentifier)&&void 0!==t?t:"—"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Cleansed ID"}),(0,l.jsx)("dd",{className:"text-sm font-semibold text-slate-900",children:null!==(s=k.cleansedId)&&void 0!==s?s:"—"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Backend status"}),(0,l.jsx)("dd",{className:"text-sm font-semibold text-slate-900",children:null!==(u=k.backendStatus)&&void 0!==u?u:"—"})]})]}),k.backendMessage&&(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 p-4 text-sm text-slate-700",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Backend message"}),(0,l.jsx)("p",{className:"mt-1",children:k.backendMessage})]})]}):(0,l.jsx)("div",{className:"mt-10 rounded-2xl border border-dashed border-slate-200 py-10 text-center text-sm text-slate-500",children:"Select an upload from the list to inspect its metadata."})]})]})]})}},5446:(e,t,s)=>{"use strict";s.d(t,{l:()=>v});var l=s(5155),a=s(368),r=s(3623),n=s(2607),i=s(7721),d=s(4068),c=s(8173),o=s.n(c),x=s(1270),m=s(4158),h=s(707),p=s(4978),u=s(3463);let b=[{id:"ingestion",label:"Ingestion",icon:x.A},{id:"extraction",label:"Extraction",icon:m.A},{id:"cleansing",label:"Cleansing",icon:h.A},{id:"enrichment",label:"Data Enrichment",icon:p.A}],f={done:{circle:"border-slate-900 bg-slate-900 text-white shadow-[0_8px_20px_rgba(15,23,42,0.25)]",label:"text-slate-900",connector:"bg-slate-900"},current:{circle:"border-slate-900 bg-slate-900 text-white shadow-[0_8px_20px_rgba(15,23,42,0.25)] scale-105",label:"text-slate-900",connector:"bg-slate-900"},upcoming:{circle:"border-slate-200 bg-white text-slate-400",label:"text-slate-400",connector:"bg-slate-200"}};function g(e){let{current:t}=e,s=Math.max(0,b.findIndex(e=>e.id===t));return(0,l.jsx)("nav",{className:"w-full text-xs",children:(0,l.jsx)("div",{className:"rounded-[28px] border border-slate-200 bg-white px-6 py-5 shadow-[0_20px_50px_rgba(15,23,42,0.08)]",children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:[(0,l.jsx)("span",{children:"Pipeline"}),(0,l.jsxs)("span",{children:["Step ",Math.min(s+1,b.length)," of ",b.length]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-6 md:flex-row md:items-center",children:b.map((e,t)=>{let a=f[t<s?"done":t===s?"current":"upcoming"],r=e.icon,n=t<s;return(0,l.jsxs)("div",{className:(0,u.A)("flex items-center gap-4 md:flex-1",t===b.length-1&&"md:flex-initial"),children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center",children:[(0,l.jsx)("div",{className:(0,u.A)("flex size-14 items-center justify-center rounded-full border-2 transition-transform duration-200",a.circle),children:(0,l.jsx)(r,{className:"size-5"})}),(0,l.jsx)("span",{className:(0,u.A)("text-[0.7rem] font-semibold",a.label),children:e.label})]}),t<b.length-1&&(0,l.jsx)("div",{className:"hidden flex-1 md:block",children:(0,l.jsx)("div",{className:"relative h-[2px] w-full rounded-full bg-slate-200",children:(0,l.jsx)("span",{className:(0,u.A)("absolute inset-y-0 left-0 rounded-full transition-all duration-300",n&&a.connector),style:{width:n?"100%":"0%"}})})})]},e.id)})})]})})})}let j=[{label:"Workspace Overview",href:"/ingestion",icon:a.A},{label:"Upload Activity",href:"/ingestion/activity",icon:r.A},{label:"Pipeline Health",href:"/extraction",icon:n.A},{label:"Search Finder",href:"/search",icon:i.A}];function v(e){let{currentStep:t,children:s}=e;return(0,l.jsxs)("div",{className:"flex min-h-screen bg-[#f7f9fb] text-slate-900",children:[(0,l.jsxs)("aside",{className:"sticky top-0 hidden h-screen w-72 flex-col border-r border-slate-200 bg-white/90 px-6 py-8 shadow-[20px_0_45px_rgba(15,23,42,0.06)] backdrop-blur lg:flex",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-slate-900 text-2xl text-white shadow-[0_15px_40px_rgba(15,23,42,0.3)]",children:""}),(0,l.jsxs)("div",{className:"leading-tight",children:[(0,l.jsx)("p",{className:"text-[0.80rem] font-semibold uppercase tracking-[0.80em] text-slate-900",children:"Content"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:"Lake"})]})]}),(0,l.jsx)("nav",{className:"mt-10 flex flex-1 flex-col gap-8 text-sm",children:(0,l.jsx)(w,{title:"Workspace",links:j})}),(0,l.jsxs)("div",{className:"space-y-4 text-xs text-slate-500",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[(0,l.jsx)("p",{className:"font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Storage"}),(0,l.jsxs)("div",{className:"mt-3 flex items-end justify-between",children:[(0,l.jsx)("p",{className:"text-3xl font-semibold text-slate-900",children:"82%"}),(0,l.jsx)("span",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.25em]",children:"Used"})]}),(0,l.jsx)("div",{className:"mt-3 h-2 rounded-full bg-white",children:(0,l.jsx)("span",{className:"block h-full rounded-full bg-slate-900",style:{width:"82%"}})})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:[(0,l.jsx)("p",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Need help?"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:"Talk with a pipeline specialist."}),(0,l.jsxs)("button",{className:"mt-3 inline-flex w-full items-center justify-center gap-2 rounded-2xl border border-slate-900 px-3 py-2 text-xs font-semibold tracking-wide text-slate-900 transition hover:bg-slate-900 hover:text-white",children:[(0,l.jsx)(d.A,{className:"size-4"}),"Contact Support"]})]})]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/95 px-4 py-4 text-sm font-semibold text-slate-900 shadow-sm lg:hidden",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"Content Lake"}),(0,l.jsx)("span",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400",children:"\xb7 Workflow"})]}),(0,l.jsx)("span",{children:t})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"sticky top-0 z-30 border-b border-slate-200 bg-[#f7f9fb]/90 backdrop-blur",children:(0,l.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-6",children:(0,l.jsx)(g,{current:t})})}),(0,l.jsx)("div",{children:s})]})]})]})}function w(e){let{title:t,links:s}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:t}),(0,l.jsx)("div",{className:"mt-3 space-y-1.5",children:s.map(e=>(0,l.jsxs)(o(),{href:e.href,className:"flex items-center gap-3 rounded-2xl px-3 py-2 font-semibold text-slate-500 transition hover:text-slate-900",children:[(0,l.jsx)(e.icon,{className:"size-4 text-slate-900"}),e.label]},e.href))})]})}},8183:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var l=s(5155);function a(e){let{title:t,description:s,eyebrow:a,actionsSlot:r}=e;return(0,l.jsx)("section",{className:"border-b border-slate-200 bg-[#f7f9fb]",children:(0,l.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-3 px-6 py-10",children:[a&&(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:a}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h1",{className:"text-4xl font-semibold text-slate-900",children:t}),s&&(0,l.jsx)("p",{className:"text-base text-slate-500 lg:max-w-2xl",children:s})]}),r&&(0,l.jsx)("div",{className:"flex items-end justify-start lg:justify-end",children:r})]})]})})}},862:(e,t,s)=>{"use strict";s.d(t,{Vj:()=>i,cB:()=>n});let l="content-lake.upload-history.v1",a=e=>!!e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.source&&"string"==typeof e.status&&"number"==typeof e.createdAt,r=e=>Array.isArray(e)?e.filter(a).slice(0,25):[],n=()=>{try{let e=window.localStorage.getItem(l);if(!e)return[];return r(JSON.parse(e))}catch(e){return[]}},i=e=>{try{let t=e.slice(0,25);window.localStorage.setItem(l,JSON.stringify(t))}catch(e){}}},9335:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(2115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))})},8094:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(2115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},7108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(2115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"}))})},8715:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(2115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[550,441,517,358],()=>t(9263)),_N_E=e.O()}]);