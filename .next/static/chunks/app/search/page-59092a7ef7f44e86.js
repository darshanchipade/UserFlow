(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{3299:(e,t,s)=>{Promise.resolve().then(s.bind(s,7550))},7550:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var l=s(5155),a=s(2115),r=s(5446),n=s(8183),i=s(3463);let c=e=>null!=e?e:"size-4";function x(e){let{className:t,size:s=16}=e;return(0,l.jsx)("svg",{className:"flex-none ".concat(c(t)),width:s,height:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function o(e){let{className:t,size:s=16}=e;return(0,l.jsx)("svg",{className:"flex-none ".concat(c(t)),width:s,height:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M6 18L18 6M6 6l12 12",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function d(e){let{className:t,size:s=14}=e;return(0,l.jsx)("svg",{className:"flex-none ".concat(c(t)),width:s,height:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function p(e){let{className:t,size:s=14}=e;return(0,l.jsx)("svg",{className:"flex-none ".concat(c(t)),width:s,height:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function h(e){let{searchQuery:t,setSearchQuery:s,handleSearch:a,filters:r,toggleFilter:n}=e;return(0,l.jsxs)("div",{className:"flex w-full flex-col items-center gap-4",children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a()},className:"flex w-full max-w-3xl flex-col gap-3 md:flex-row md:items-center",children:[(0,l.jsxs)("div",{className:"relative h-[50px] w-full rounded-[12px] bg-white",children:[(0,l.jsxs)("div",{className:"box-border flex h-full items-center justify-between overflow-clip px-4 py-3",children:[(0,l.jsxs)("div",{className:"flex w-full items-center gap-2 font-medium text-[#4d4d4d]",children:[(0,l.jsx)(x,{className:"size-4 text-[#4d4d4d]"}),(0,l.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Search...",className:"w-full border-none bg-transparent text-[14px] leading-[20px] text-[#4d4d4d] placeholder-[#9aa0a6] outline-none"})]}),t&&(0,l.jsx)("button",{type:"button",onClick:()=>s(""),className:"text-gray-500 transition-colors hover:text-gray-600","aria-label":"Clear search",children:(0,l.jsx)(o,{className:"size-4"})})]}),(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-[12px] border border-[#d0d1d4] shadow-[0px_0.5px_2.5px_0px_rgba(0,0,0,0.3)]"})]}),(0,l.jsx)("button",{type:"submit",className:"h-[50px] rounded-[12px] bg-[#2180f9] px-6 font-semibold text-white shadow transition-colors hover:bg-blue-600",children:"Search"})]})}),r.length>0&&(0,l.jsxs)("div",{className:"flex w-full max-w-4xl flex-col items-center gap-4",children:[(0,l.jsx)("div",{className:"text-[14px] text-[#111215]",children:"Refine your search by"}),(0,l.jsx)("div",{className:"flex w-full flex-wrap items-start gap-2.5",children:r.map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>n(e),className:(0,i.A)("box-border flex items-center justify-center gap-1 rounded-[24px] px-3 py-2 text-[12px] font-medium tracking-[-0.432px] shadow-[0px_1px_2.5px_0px_rgba(0,0,0,0.24),0px_0px_0px_0.5px_rgba(0,0,0,0.12)] transition-all duration-200",e.isActive?"bg-[#2180f9] text-white":"bg-white text-[#4d4d4d] hover:bg-gray-50"),children:[e.label,null!=e.count&&(0,l.jsxs)("span",{children:["(",e.count,")"]})]},e.id))})]})]})}function m(e){let{results:t,isLoading:s,onFilter:r}=e,[n,c]=(0,a.useState)("raw"),[x,o]=(0,a.useState)({}),h=(0,a.useMemo)(()=>Array.isArray(t)?t:t&&Array.isArray(t.results)?t.results:[],[t]),m=(e,t)=>{var s;"undefined"!=typeof navigator&&(null===(s=navigator.clipboard)||void 0===s?void 0:s.writeText)&&navigator.clipboard.writeText(e||""),o(e=>({...e,[t]:!0})),setTimeout(()=>{o(e=>({...e,[t]:!1}))},2e3)};return s?(0,l.jsx)("div",{className:"mt-6 text-sm text-slate-500",children:"Searching…"}):h.length?(0,l.jsxs)("div",{className:"flex w-full flex-col items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex w-full max-w-3xl items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-[18px] text-[#111215]",children:["Search Results (",h.length,")"]}),(0,l.jsxs)("button",{type:"button",className:"flex items-center gap-1 text-[12px] font-medium text-[#111215] transition-opacity hover:opacity-70",onClick:r,children:[(0,l.jsx)("span",{children:"Filter"}),(0,l.jsx)(d,{className:"size-4 text-[#111215]"})]})]}),(0,l.jsx)("div",{className:"flex w-full max-w-3xl flex-col gap-4",children:h.map((e,t)=>{var s,a,r,o,d,h,u,f,b;let g=null!==(r=null!==(a=null!==(s=e.source)&&void 0!==s?s:e.sourceFieldName)&&void 0!==a?a:e.sourceType)&&void 0!==r?r:"",j=null!==(d=null!==(o=e.section)&&void 0!==o?o:e.sectionPath)&&void 0!==d?d:"",v=null!==(f=null!==(u=null!==(h=e.content)&&void 0!==h?h:e.cleansedText)&&void 0!==u?u:e.snippet)&&void 0!==f?f:"",N=null!==(b=e.id)&&void 0!==b?b:String(t);return(0,l.jsxs)("article",{className:"box-border flex flex-col gap-4 rounded-[12px] bg-white p-4 shadow-[0px_0.5px_2.5px_0px_rgba(0,0,0,0.3)]",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-[10px] font-semibold text-[#737780]",children:"Source"}),(0,l.jsx)("p",{className:"text-[12px] font-medium text-[#111215] break-all",children:g})]}),(0,l.jsxs)("div",{className:"w-[318px] max-w-full",children:[(0,l.jsx)("p",{className:"text-[10px] font-semibold text-[#737780]",children:"Section"}),(0,l.jsx)("p",{className:"text-[12px] font-medium text-[#111215] break-all",children:j})]})]}),(0,l.jsx)("div",{className:"h-px w-full bg-[#d0d1d4]"}),(0,l.jsxs)("div",{className:"flex h-[22px] w-[164px] items-center rounded-[6px] bg-[rgba(0,0,0,0.01)]",children:[(0,l.jsx)("button",{type:"button",onClick:()=>c("raw"),className:(0,i.A)("mr-[-1px] h-full flex-1 rounded-[5px] text-center text-[13px] leading-[16px] transition-all","raw"===n?"bg-[#111215] text-white":"bg-transparent text-[#737780] hover:bg-gray-100"),children:"Raw"}),(0,l.jsx)("button",{type:"button",onClick:()=>c("format"),className:(0,i.A)("mr-[-1px] h-full flex-1 rounded-[5px] text-center text-[13px] leading-[16px] transition-all","format"===n?"bg-[#111215] text-white":"bg-transparent text-[#737780] hover:bg-gray-100"),children:"Format"})]}),(0,l.jsx)("div",{className:"text-[12px] leading-[20px] text-[#4d4d4d]",children:v}),(0,l.jsx)("div",{children:(0,l.jsxs)("button",{type:"button",onClick:()=>m(v,N),className:(0,i.A)("rounded-[24px] transition-all duration-200",x[N]?"bg-gray-50":"bg-white hover:bg-gray-50"),children:[(0,l.jsxs)("div",{className:"box-border flex items-center gap-1 px-3 py-[3px]",children:[(0,l.jsx)(p,{className:"size-3.5 text-[#111215]"}),(0,l.jsx)("span",{className:"text-[12px] font-medium text-[#111215]",children:x[N]?"Copied":"Copy"})]}),(0,l.jsx)("div",{className:"pointer-events-none inset-[-1px] rounded-[25px] border border-black shadow-[0px_1px_2.5px_0px_rgba(0,122,255,0.24),0px_0px_0px_0.5px_rgba(0,122,255,0.12)]"})]})})]},N)})})]}):null}let u=e=>!!(e&&"object"==typeof e&&!Array.isArray(e)),f=e=>Array.isArray(e)?e.filter(e=>u(e)&&"string"==typeof e.value).map((e,t)=>{var s,l,a;let r=e.type?"".concat(e.type,": ").concat(e.value):null!==(s=e.value)&&void 0!==s?s:"Chip ".concat(t+1);return{id:"".concat(null!==(l=e.type)&&void 0!==l?l:"chip","-").concat(e.value,"-").concat(t),label:r,count:e.count,isActive:!1,value:null!==(a=e.value)&&void 0!==a?a:"",type:e.type}}):[],b=(e,t)=>{let s={query:e,tags:[],keywords:[],context:{}};return t.forEach(e=>{if(e.type&&e.value){if("Tag"===e.type)s.tags.push(e.value);else if("Keyword"===e.type)s.keywords.push(e.value);else if(e.type.startsWith("Context:")){let t=e.type.substring(8).split(".").map(e=>e.trim()).filter(Boolean);if(!t.length)return;let l=s.context;for(let e=0;e<t.length-1;e+=1){let s=t[e];u(l[s])||(l[s]={}),l=l[s]}let a=t[t.length-1];Array.isArray(l[a])||(l[a]=[]);let r=l[a];r.includes(e.value)||r.push(e.value)}}}),s},g=e=>{if(Array.isArray(e))return e;if(u(e)){if(Array.isArray(e.results))return e.results;if(u(e.body)&&Array.isArray(e.body.results))return e.body.results}return[]};function j(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)([]),c=(0,a.useMemo)(()=>s.filter(e=>e.isActive),[s]),[x,o]=(0,a.useState)([]),[d,p]=(0,a.useState)(!1),[u,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)(null),[y,w]=(0,a.useState)(null),k=async()=>{if(e.trim()){p(!0),N(null),i([]),o([]);try{var t,s;let l=await fetch("/api/refine?query=".concat(encodeURIComponent(e.trim()))),a=await l.json();if(!l.ok)throw Error(null!==(t=null==a?void 0:a.error)&&void 0!==t?t:"Unable to retrieve refinement chips.");let r=f(null!==(s=a.body)&&void 0!==s?s:a);i(r)}catch(e){N(e instanceof Error?e.message:"Unable to fetch refinement chips.")}finally{p(!1)}}};return(0,a.useEffect)(()=>{if(!c.length||!e.trim()){o([]);return}let t=!1;return(async()=>{j(!0),w(null);try{var s,l;let a=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b(e.trim(),c))}),r=await a.json();if(!a.ok)throw Error(null!==(s=null==r?void 0:r.error)&&void 0!==s?s:"Search request failed.");t||o(g(null!==(l=r.body)&&void 0!==l?l:r))}catch(e){t||(o([]),w(e instanceof Error?e.message:"Unable to complete search."))}finally{t||j(!1)}})(),()=>{t=!0}},[c,e]),(0,l.jsxs)(r.l,{currentStep:"ingestion",children:[(0,l.jsx)(n.F,{title:"Search Finder",description:"Explore Content Lake with AI-powered refinements fed by the Spring Boot search controller."}),(0,l.jsx)("main",{className:"mx-auto max-w-5xl px-6 py-10",children:(0,l.jsxs)("div",{className:"rounded-[24px] border border-slate-200 bg-[#f9f9f9] px-6 py-12 shadow-sm md:px-16",children:[(0,l.jsxs)("div",{className:"flex justify-end gap-4 text-sm font-semibold text-[#2180f9]",children:[(0,l.jsx)("a",{href:"/ingestion",className:"hover:underline",children:"Upload JSON"}),(0,l.jsx)("a",{href:"/chatbot",className:"hover:underline",children:"Open Chatbot"})]}),(0,l.jsxs)("div",{className:"mt-8 flex flex-col items-center gap-8",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h1",{className:"text-[32px] font-medium tracking-[-0.768px] text-[#111215] md:text-[48px]",children:"What are you looking for?"}),(0,l.jsx)("p",{className:"mt-2 text-sm text-[#4d4d4d]",children:"Run an initial query to generate intelligent refinements."})]}),(0,l.jsx)(h,{searchQuery:e,setSearchQuery:t,handleSearch:k,filters:s,toggleFilter:e=>{i(t=>t.map(t=>t.id===e.id?{...t,isActive:!t.isActive}:t))}}),d&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Loading suggestions…"}),v&&(0,l.jsx)("p",{className:"text-sm text-rose-600",role:"alert",children:v}),(0,l.jsx)(m,{results:x,isLoading:u}),!c.length&&!d&&(0,l.jsx)("p",{className:"text-center text-sm text-slate-500",children:"Select one or more refinement chips to trigger a contextual search."}),y&&(0,l.jsx)("p",{className:"text-sm text-rose-600",role:"alert",children:y})]})]})})]})}},5446:(e,t,s)=>{"use strict";s.d(t,{l:()=>v});var l=s(5155),a=s(368),r=s(3623),n=s(2607),i=s(7721),c=s(4068),x=s(8173),o=s.n(x),d=s(1270),p=s(4158),h=s(707),m=s(4978),u=s(3463);let f=[{id:"ingestion",label:"Ingestion",icon:d.A},{id:"extraction",label:"Extraction",icon:p.A},{id:"cleansing",label:"Cleansing",icon:h.A},{id:"enrichment",label:"Data Enrichment",icon:m.A}],b={done:{circle:"border-slate-900 bg-slate-900 text-white shadow-[0_8px_20px_rgba(15,23,42,0.25)]",label:"text-slate-900",connector:"bg-slate-900"},current:{circle:"border-slate-900 bg-slate-900 text-white shadow-[0_8px_20px_rgba(15,23,42,0.25)] scale-105",label:"text-slate-900",connector:"bg-slate-900"},upcoming:{circle:"border-slate-200 bg-white text-slate-400",label:"text-slate-400",connector:"bg-slate-200"}};function g(e){let{current:t}=e,s=Math.max(0,f.findIndex(e=>e.id===t));return(0,l.jsx)("nav",{className:"w-full text-xs",children:(0,l.jsx)("div",{className:"rounded-[28px] border border-slate-200 bg-white px-6 py-5 shadow-[0_20px_50px_rgba(15,23,42,0.08)]",children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:[(0,l.jsx)("span",{children:"Pipeline"}),(0,l.jsxs)("span",{children:["Step ",Math.min(s+1,f.length)," of ",f.length]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-6 md:flex-row md:items-center",children:f.map((e,t)=>{let a=b[t<s?"done":t===s?"current":"upcoming"],r=e.icon,n=t<s;return(0,l.jsxs)("div",{className:(0,u.A)("flex items-center gap-4 md:flex-1",t===f.length-1&&"md:flex-initial"),children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center",children:[(0,l.jsx)("div",{className:(0,u.A)("flex size-14 items-center justify-center rounded-full border-2 transition-transform duration-200",a.circle),children:(0,l.jsx)(r,{className:"size-5"})}),(0,l.jsx)("span",{className:(0,u.A)("text-[0.7rem] font-semibold",a.label),children:e.label})]}),t<f.length-1&&(0,l.jsx)("div",{className:"hidden flex-1 md:block",children:(0,l.jsx)("div",{className:"relative h-[2px] w-full rounded-full bg-slate-200",children:(0,l.jsx)("span",{className:(0,u.A)("absolute inset-y-0 left-0 rounded-full transition-all duration-300",n&&a.connector),style:{width:n?"100%":"0%"}})})})]},e.id)})})]})})})}let j=[{label:"Workspace Overview",href:"/ingestion",icon:a.A},{label:"Upload Activity",href:"/ingestion/activity",icon:r.A},{label:"Pipeline Health",href:"/extraction",icon:n.A},{label:"Search Finder",href:"/search",icon:i.A}];function v(e){let{currentStep:t,children:s}=e;return(0,l.jsxs)("div",{className:"flex min-h-screen bg-[#f7f9fb] text-slate-900",children:[(0,l.jsxs)("aside",{className:"sticky top-0 hidden h-screen w-72 flex-col border-r border-slate-200 bg-white/90 px-6 py-8 shadow-[20px_0_45px_rgba(15,23,42,0.06)] backdrop-blur lg:flex",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-slate-900 text-2xl text-white shadow-[0_15px_40px_rgba(15,23,42,0.3)]",children:""}),(0,l.jsxs)("div",{className:"leading-tight",children:[(0,l.jsx)("p",{className:"text-[0.80rem] font-semibold uppercase tracking-[0.80em] text-slate-900",children:"Content"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:"Lake"})]})]}),(0,l.jsx)("nav",{className:"mt-10 flex flex-1 flex-col gap-8 text-sm",children:(0,l.jsx)(N,{title:"Workspace",links:j})}),(0,l.jsxs)("div",{className:"space-y-4 text-xs text-slate-500",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[(0,l.jsx)("p",{className:"font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Storage"}),(0,l.jsxs)("div",{className:"mt-3 flex items-end justify-between",children:[(0,l.jsx)("p",{className:"text-3xl font-semibold text-slate-900",children:"82%"}),(0,l.jsx)("span",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.25em]",children:"Used"})]}),(0,l.jsx)("div",{className:"mt-3 h-2 rounded-full bg-white",children:(0,l.jsx)("span",{className:"block h-full rounded-full bg-slate-900",style:{width:"82%"}})})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:[(0,l.jsx)("p",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Need help?"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-slate-900",children:"Talk with a pipeline specialist."}),(0,l.jsxs)("button",{className:"mt-3 inline-flex w-full items-center justify-center gap-2 rounded-2xl border border-slate-900 px-3 py-2 text-xs font-semibold tracking-wide text-slate-900 transition hover:bg-slate-900 hover:text-white",children:[(0,l.jsx)(c.A,{className:"size-4"}),"Contact Support"]})]})]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/95 px-4 py-4 text-sm font-semibold text-slate-900 shadow-sm lg:hidden",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"Content Lake"}),(0,l.jsx)("span",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400",children:"\xb7 Workflow"})]}),(0,l.jsx)("span",{children:t})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"sticky top-0 z-30 border-b border-slate-200 bg-[#f7f9fb]/90 backdrop-blur",children:(0,l.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-6",children:(0,l.jsx)(g,{current:t})})}),(0,l.jsx)("div",{children:s})]})]})]})}function N(e){let{title:t,links:s}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:t}),(0,l.jsx)("div",{className:"mt-3 space-y-1.5",children:s.map(e=>(0,l.jsxs)(o(),{href:e.href,className:"flex items-center gap-3 rounded-2xl px-3 py-2 font-semibold text-slate-500 transition hover:text-slate-900",children:[(0,l.jsx)(e.icon,{className:"size-4 text-slate-900"}),e.label]},e.href))})]})}},8183:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var l=s(5155);function a(e){let{title:t,description:s,eyebrow:a,actionsSlot:r}=e;return(0,l.jsx)("section",{className:"border-b border-slate-200 bg-[#f7f9fb]",children:(0,l.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-3 px-6 py-10",children:[a&&(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:a}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h1",{className:"text-4xl font-semibold text-slate-900",children:t}),s&&(0,l.jsx)("p",{className:"text-base text-slate-500 lg:max-w-2xl",children:s})]}),r&&(0,l.jsx)("div",{className:"flex items-end justify-start lg:justify-end",children:r})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[550,441,517,358],()=>t(3299)),_N_E=e.O()}]);