{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/api/ingestion/cleansed-context/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\n\nconst backendBaseUrl = process.env.SPRINGBOOT_BASE_URL;\n\nconst parseUpstreamBody = async (upstream: Response) => {\n  const rawBody = await upstream.text();\n  let body: unknown = rawBody;\n  try {\n    body = JSON.parse(rawBody);\n  } catch {\n    // leave body as raw string\n  }\n  return { body, rawBody };\n};\n\nexport async function GET(request: NextRequest) {\n  if (!backendBaseUrl) {\n    return NextResponse.json(\n      { error: \"SPRINGBOOT_BASE_URL is not configured.\" },\n      { status: 500 },\n    );\n  }\n\n  const id = request.nextUrl.searchParams.get(\"id\");\n  if (!id) {\n    return NextResponse.json(\n      { error: \"Missing required `id` query parameter.\" },\n      { status: 400 },\n    );\n  }\n\n  try {\n    const targetUrl = new URL(`/api/cleansed-context/${id}`, backendBaseUrl);\n    const upstream = await fetch(targetUrl);\n    const { body, rawBody } = await parseUpstreamBody(upstream);\n\n    return NextResponse.json(\n      {\n        upstreamStatus: upstream.status,\n        upstreamOk: upstream.ok,\n        body,\n        rawBody,\n      },\n      { status: upstream.ok ? 200 : upstream.status },\n    );\n  } catch (error) {\n    return NextResponse.json(\n      {\n        error:\n          error instanceof Error\n            ? error.message\n            : \"Unable to reach Spring Boot cleansed context endpoint.\",\n      },\n      { status: 502 },\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,iBAAiB,QAAQ,GAAG,CAAC,mBAAmB;AAEtD,MAAM,oBAAoB,OAAO;IAC/B,MAAM,UAAU,MAAM,SAAS,IAAI;IACnC,IAAI,OAAgB;IACpB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;IACN,2BAA2B;IAC7B;IACA,OAAO;QAAE;QAAM;IAAQ;AACzB;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI,CAAC,gBAAgB;QACnB,OAAO,+LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyC,GAClD;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,KAAK,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAC5C,IAAI,CAAC,IAAI;QACP,OAAO,+LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyC,GAClD;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI;QACF,MAAM,YAAY,IAAI,IAAI,CAAC,sBAAsB,EAAE,IAAI,EAAE;QACzD,MAAM,WAAW,MAAM,MAAM;QAC7B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,kBAAkB;QAElD,OAAO,+LAAY,CAAC,IAAI,CACtB;YACE,gBAAgB,SAAS,MAAM;YAC/B,YAAY,SAAS,EAAE;YACvB;YACA;QACF,GACA;YAAE,QAAQ,SAAS,EAAE,GAAG,MAAM,SAAS,MAAM;QAAC;IAElD,EAAE,OAAO,OAAO;QACd,OAAO,+LAAY,CAAC,IAAI,CACtB;YACE,OACE,iBAAiB,QACb,MAAM,OAAO,GACb;QACR,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}