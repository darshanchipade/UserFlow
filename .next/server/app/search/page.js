(()=>{var e={};e.id=959,e.ids=[959],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},2055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>x,routeModule:()=>p,tree:()=>d});var s=r(260),a=r(8203),n=r(5155),i=r.n(n),l=r(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2524)),"/Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/search/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],x=["/Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/search/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7685:(e,t,r)=>{Promise.resolve().then(r.bind(r,2524))},7957:(e,t,r)=>{Promise.resolve().then(r.bind(r,7419))},7419:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(5512),a=r(8009),n=r(9199),i=r(6287),l=r(2281);let o=e=>e??"size-4";function d({className:e,size:t=16}){return(0,s.jsx)("svg",{className:`flex-none ${o(e)}`,width:t,height:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function x({className:e,size:t=16}){return(0,s.jsx)("svg",{className:`flex-none ${o(e)}`,width:t,height:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M6 18L18 6M6 6l12 12",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function c({className:e,size:t=14}){return(0,s.jsx)("svg",{className:`flex-none ${o(e)}`,width:t,height:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function p({className:e,size:t=14}){return(0,s.jsx)("svg",{className:`flex-none ${o(e)}`,width:t,height:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}function u({searchQuery:e,setSearchQuery:t,handleSearch:r,filters:a,toggleFilter:n}){return(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r()},className:"flex w-full max-w-3xl flex-col gap-3 md:flex-row md:items-center",children:[(0,s.jsxs)("div",{className:"relative h-[50px] w-full rounded-[12px] bg-white",children:[(0,s.jsxs)("div",{className:"box-border flex h-full items-center justify-between overflow-clip px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex w-full items-center gap-2 font-medium text-[#4d4d4d]",children:[(0,s.jsx)(d,{className:"size-4 text-[#4d4d4d]"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search...",className:"w-full border-none bg-transparent text-[14px] leading-[20px] text-[#4d4d4d] placeholder-[#9aa0a6] outline-none"})]}),e&&(0,s.jsx)("button",{type:"button",onClick:()=>t(""),className:"text-gray-500 transition-colors hover:text-gray-600","aria-label":"Clear search",children:(0,s.jsx)(x,{className:"size-4"})})]}),(0,s.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-[12px] border border-[#d0d1d4] shadow-[0px_0.5px_2.5px_0px_rgba(0,0,0,0.3)]"})]}),(0,s.jsx)("button",{type:"submit",className:"h-[50px] rounded-[12px] bg-[#2180f9] px-6 font-semibold text-white shadow transition-colors hover:bg-blue-600",children:"Search"})]})}),a.length>0&&(0,s.jsxs)("div",{className:"flex w-full max-w-4xl flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"text-[14px] text-[#111215]",children:"Refine your search by"}),(0,s.jsx)("div",{className:"flex w-full flex-wrap items-start gap-2.5",children:a.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>n(e),className:(0,l.A)("box-border flex items-center justify-center gap-1 rounded-[24px] px-3 py-2 text-[12px] font-medium tracking-[-0.432px] shadow-[0px_1px_2.5px_0px_rgba(0,0,0,0.24),0px_0px_0px_0.5px_rgba(0,0,0,0.12)] transition-all duration-200",e.isActive?"bg-[#2180f9] text-white":"bg-white text-[#4d4d4d] hover:bg-gray-50"),children:[e.label,null!=e.count&&(0,s.jsxs)("span",{children:["(",e.count,")"]})]},e.id))})]})]})}function h({results:e,isLoading:t,onFilter:r}){let[n,i]=(0,a.useState)("raw"),[o,d]=(0,a.useState)({}),x=(0,a.useMemo)(()=>Array.isArray(e)?e:e&&Array.isArray(e.results)?e.results:[],[e]),u=(e,t)=>{"undefined"!=typeof navigator&&navigator.clipboard?.writeText&&navigator.clipboard.writeText(e||""),d(e=>({...e,[t]:!0})),setTimeout(()=>{d(e=>({...e,[t]:!1}))},2e3)};return t?(0,s.jsx)("div",{className:"mt-6 text-sm text-slate-500",children:"Searching…"}):x.length?(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex w-full max-w-3xl items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-[18px] text-[#111215]",children:["Search Results (",x.length,")"]}),(0,s.jsxs)("button",{type:"button",className:"flex items-center gap-1 text-[12px] font-medium text-[#111215] transition-opacity hover:opacity-70",onClick:r,children:[(0,s.jsx)("span",{children:"Filter"}),(0,s.jsx)(c,{className:"size-4 text-[#111215]"})]})]}),(0,s.jsx)("div",{className:"flex w-full max-w-3xl flex-col gap-4",children:x.map((e,t)=>{let r=e.source??e.sourceFieldName??e.sourceType??"",a=e.section??e.sectionPath??"",d=e.content??e.cleansedText??e.snippet??"",x=e.id??String(t);return(0,s.jsxs)("article",{className:"box-border flex flex-col gap-4 rounded-[12px] bg-white p-4 shadow-[0px_0.5px_2.5px_0px_rgba(0,0,0,0.3)]",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold text-[#737780]",children:"Source"}),(0,s.jsx)("p",{className:"text-[12px] font-medium text-[#111215] break-all",children:r})]}),(0,s.jsxs)("div",{className:"w-[318px] max-w-full",children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold text-[#737780]",children:"Section"}),(0,s.jsx)("p",{className:"text-[12px] font-medium text-[#111215] break-all",children:a})]})]}),(0,s.jsx)("div",{className:"h-px w-full bg-[#d0d1d4]"}),(0,s.jsxs)("div",{className:"flex h-[22px] w-[164px] items-center rounded-[6px] bg-[rgba(0,0,0,0.01)]",children:[(0,s.jsx)("button",{type:"button",onClick:()=>i("raw"),className:(0,l.A)("mr-[-1px] h-full flex-1 rounded-[5px] text-center text-[13px] leading-[16px] transition-all","raw"===n?"bg-[#111215] text-white":"bg-transparent text-[#737780] hover:bg-gray-100"),children:"Raw"}),(0,s.jsx)("button",{type:"button",onClick:()=>i("format"),className:(0,l.A)("mr-[-1px] h-full flex-1 rounded-[5px] text-center text-[13px] leading-[16px] transition-all","format"===n?"bg-[#111215] text-white":"bg-transparent text-[#737780] hover:bg-gray-100"),children:"Format"})]}),(0,s.jsx)("div",{className:"text-[12px] leading-[20px] text-[#4d4d4d]",children:d}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"button",onClick:()=>u(d,x),className:(0,l.A)("rounded-[24px] transition-all duration-200",o[x]?"bg-gray-50":"bg-white hover:bg-gray-50"),children:[(0,s.jsxs)("div",{className:"box-border flex items-center gap-1 px-3 py-[3px]",children:[(0,s.jsx)(p,{className:"size-3.5 text-[#111215]"}),(0,s.jsx)("span",{className:"text-[12px] font-medium text-[#111215]",children:o[x]?"Copied":"Copy"})]}),(0,s.jsx)("div",{className:"pointer-events-none inset-[-1px] rounded-[25px] border border-black shadow-[0px_1px_2.5px_0px_rgba(0,122,255,0.24),0px_0px_0px_0.5px_rgba(0,122,255,0.12)]"})]})})]},x)})})]}):null}let m=e=>!!(e&&"object"==typeof e&&!Array.isArray(e)),f=e=>Array.isArray(e)?e.filter(e=>m(e)&&"string"==typeof e.value).map((e,t)=>{let r=e.type?`${e.type}: ${e.value}`:e.value??`Chip ${t+1}`;return{id:`${e.type??"chip"}-${e.value}-${t}`,label:r,count:e.count,isActive:!1,value:e.value??"",type:e.type}}):[];function g(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)([]),o=(0,a.useMemo)(()=>r.filter(e=>e.isActive),[r]),[d,x]=(0,a.useState)([]),[c,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[j,w]=(0,a.useState)(null),y=async()=>{if(e.trim()){p(!0),v(null),l([]),x([]);try{let t=await fetch(`/api/refine?query=${encodeURIComponent(e.trim())}`),r=await t.json();if(!t.ok)throw Error(r?.error??"Unable to retrieve refinement chips.");let s=f(r.body??r);l(s)}catch(e){v(e instanceof Error?e.message:"Unable to fetch refinement chips.")}finally{p(!1)}}};return(0,s.jsxs)(n.l,{currentStep:"ingestion",children:[(0,s.jsx)(i.F,{title:"Search Finder",description:"Explore Content Lake with AI-powered refinements fed by the Spring Boot search controller."}),(0,s.jsx)("main",{className:"mx-auto max-w-5xl px-6 py-10",children:(0,s.jsxs)("div",{className:"rounded-[24px] border border-slate-200 bg-[#f9f9f9] px-6 py-12 shadow-sm md:px-16",children:[(0,s.jsxs)("div",{className:"flex justify-end gap-4 text-sm font-semibold text-[#2180f9]",children:[(0,s.jsx)("a",{href:"/ingestion",className:"hover:underline",children:"Upload JSON"}),(0,s.jsx)("a",{href:"/chatbot",className:"hover:underline",children:"Open Chatbot"})]}),(0,s.jsxs)("div",{className:"mt-8 flex flex-col items-center gap-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-[32px] font-medium tracking-[-0.768px] text-[#111215] md:text-[48px]",children:"What are you looking for?"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-[#4d4d4d]",children:"Run an initial query to generate intelligent refinements."})]}),(0,s.jsx)(u,{searchQuery:e,setSearchQuery:t,handleSearch:y,filters:r,toggleFilter:e=>{l(t=>t.map(t=>t.id===e.id?{...t,isActive:!t.isActive}:t))}}),c&&(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Loading suggestions…"}),b&&(0,s.jsx)("p",{className:"text-sm text-rose-600",role:"alert",children:b}),(0,s.jsx)(h,{results:d,isLoading:m}),!o.length&&!c&&(0,s.jsx)("p",{className:"text-center text-sm text-slate-500",children:"Select one or more refinement chips to trigger a contextual search."}),j&&(0,s.jsx)("p",{className:"text-sm text-rose-600",role:"alert",children:j})]})]})})]})}},2524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/search/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/search/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,619,77,30,546],()=>r(2055));module.exports=s})();