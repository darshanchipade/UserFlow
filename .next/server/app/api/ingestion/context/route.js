(()=>{var e={};e.id=680,e.ids=[680],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},7290:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>y,serverHooks:()=>g,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{GET:()=>j,POST:()=>m});var n=t(2706),o=t(8203),a=t(5994),i=t(9187);let u=require("fs");var p=t(3873),d=t.n(p);let c=process.env.EXTRACTION_CACHE_DIR??d().join(process.cwd(),".extraction-cache"),l=async()=>{await u.promises.mkdir(c,{recursive:!0})},x=async(e,r)=>{if(!e)throw Error("Snapshot id is required");await l();let t=d().join(c,`${e}.json`);await u.promises.writeFile(t,JSON.stringify(r),"utf8")},w=async e=>{try{let r=d().join(c,`${e}.json`),t=await u.promises.readFile(r,"utf8");return JSON.parse(t)}catch(e){if(e?.code==="ENOENT")return null;throw e}};async function m(e){let r;try{r=await e.json()}catch{return i.NextResponse.json({error:"Request body must be JSON."},{status:400})}let{id:t,payload:s}=r;if(!t||"string"!=typeof t)return i.NextResponse.json({error:"Field `id` is required."},{status:400});if(!s||"object"!=typeof s)return i.NextResponse.json({error:"Field `payload` is required."},{status:400});let n={mode:s.mode??"local",metadata:s.metadata??{name:"unknown",size:0,source:"unknown",uploadedAt:Date.now()},rawJson:s.rawJson,tree:s.tree,sourceUri:s.sourceUri,backendPayload:s.backendPayload,storedAt:Date.now()};return await x(t,n),i.NextResponse.json({ok:!0})}async function j(e){let r=e.nextUrl.searchParams.get("id");if(!r)return i.NextResponse.json({error:"Missing required `id` query parameter."},{status:400});let t=await w(r);return t?i.NextResponse.json(t):i.NextResponse.json({error:"Snapshot not found."},{status:404})}let y=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/ingestion/context/route",pathname:"/api/ingestion/context",filename:"route",bundlePath:"app/api/ingestion/context/route"},resolvedPagePath:"/Users/darshanchipade/Documents/GitHub/UserFlow/UserFlow/src/app/api/ingestion/context/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:h,serverHooks:g}=y;function v(){return(0,a.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:h})}},6487:()=>{},8335:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,452],()=>t(7290));module.exports=s})();