(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{4423:(e,t,a)=>{Promise.resolve().then(a.bind(a,8697))},8697:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var s=a(5155),l=a(3623),r=a(1270),n=a(2115);let o=n.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"}))});var i=a(8552),d=a(4826),c=a(7451),u=a(6441),p=a(2471),m=a(7721),h=a(8094),x=a(9335),f=a(8715),b=a(7108),g=a(3463),v=a(6046),y=a(5446),w=a(8183),j=a(918),k=a(7997),N=a(1330),A=a(5863),S=a(862);let I=[{id:"s3",title:"Amazon S3 / Cloud",description:"Ingest directly from s3:// or classpath URIs.",icon:l.A,disabled:!1},{id:"local",title:"Local Upload",description:"Upload files directly from your device.",icon:r.A,disabled:!1},{id:"api",title:"API Endpoint",description:"Send JSON payloads programmatically.",icon:o,disabled:!1}],E={uploading:{label:"Uploading",className:"bg-amber-50 text-amber-700",dot:"bg-amber-400"},success:{label:"Accepted",className:"bg-emerald-50 text-emerald-700",dot:"bg-emerald-500"},error:{label:"Error",className:"bg-rose-50 text-rose-700",dot:"bg-rose-500"}},O=e=>{try{return JSON.parse(e)}catch(e){return null}},P=e=>{if(!e)return"Extraction context could not be cached in this browser.";switch(e.reason){case"quota":return"Browser storage is full. Clear other extraction tabs or reduce the payload size and try again.";case"ssr":return"Extraction context can only be saved in a browser tab.";default:return"Extraction context could not be cached locally. Check the console for details."}},C=e=>{var t;let{feedback:a}=e;if("idle"===a.state)return null;let l=(0,g.A)("inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold","success"===a.state?"bg-emerald-50 text-emerald-700":"error"===a.state?"bg-rose-50 text-rose-700":"bg-indigo-50 text-indigo-600"),r="loading"===a.state?i.A:"success"===a.state?d.A:c.A,n=null!==(t=a.message)&&void 0!==t?t:"loading"===a.state?"Contacting backend...":"success"===a.state?"Completed successfully.":"Something went wrong.";return(0,s.jsxs)("div",{className:l,children:[(0,s.jsx)(r,{className:(0,g.A)("size-4","loading"===a.state&&"animate-spin")}),n]})};function U(){let e=(0,v.useRouter)(),t=(0,n.useRef)(null),a=(0,n.useRef)(null),d=(0,n.useRef)(null),[c,U]=(0,n.useState)("local"),[D,L]=(0,n.useState)(null),[M,B]=(0,n.useState)(null),[z,J]=(0,n.useState)(""),[R,T]=(0,n.useState)(""),[W,V]=(0,n.useState)([]),[X,F]=(0,n.useState)("Awaiting content"),[Z,_]=(0,n.useState)(new Set),[H,q]=(0,n.useState)(""),[G,K]=(0,n.useState)([]),[Q,Y]=(0,n.useState)(null),[$,ee]=(0,n.useState)(!1),[et,ea]=(0,n.useState)({state:"idle"}),[es,el]=(0,n.useState)({state:"idle"}),[er,en]=(0,n.useState)({state:"idle"}),[eo,ei]=(0,n.useState)(!1),ed=(0,n.useMemo)(()=>(0,j.hV)(W,H),[W,H]),ec=(0,n.useMemo)(()=>W.length?W.flatMap(e=>(0,j.HW)(e)):[],[W]);(0,n.useEffect)(()=>{if("s3"===c)V([]),F("Structure preview unavailable for S3/classpath sources.");else if("local"===c&&M){let t=O(M);if(t){var e;eu(null!==(e=null==D?void 0:D.name)&&void 0!==e?e:"Local JSON",t)}}else if("api"===c&&z.trim()){let e=O(z);e&&eu("API payload",e)}},[c]),(0,n.useEffect)(()=>{let e=(0,S.cB)();e.length&&K(e),ee(!0)},[]),(0,n.useEffect)(()=>{$&&(0,S.Vj)(G)},[G,$]);let eu=(e,t)=>{let a=(0,j.bZ)(t,[],{value:0});if(!a.length)return V([]),F("Unable to derive structure from payload."),_(new Set),[];let s={id:e,label:e,path:e,type:"object",children:a},l=[s];return V(l),F(e),_(new Set([s.id])),l},ep=async e=>{if(!e||0===e.length)return;let[s]=Array.from(e);L(s),ea({state:"idle"});let l=crypto.randomUUID();if(a.current=l,K(e=>[{id:l,name:s.name,size:s.size,type:s.type||s.name.split(".").pop()||"file",source:"Local",status:"uploading",createdAt:Date.now()},...e]),s.name.toLowerCase().endsWith(".json")){let e=await s.text();B(e);let t=O(e);t?eu(s.name,t):(V([]),F("Uploaded JSON could not be parsed."))}else B(null),V([]),F("Select a JSON file to preview its structure.");t.current&&(t.current.value="")},em=async()=>{ei(!0),ea({state:"loading",message:"Dispatching to backend..."});try{"local"===c?await ex():"api"===c?await ef():await eb()}catch(e){ea({state:"error",message:e instanceof Error?e.message:"Extraction failed unexpectedly."}),ei(!1)}},eh=e=>{if(d.current){K(t=>t.map(t=>t.id===d.current?{...t,size:e}:t));return}let t=crypto.randomUUID();d.current=t,K(a=>[{id:t,name:"API payload",size:e,type:"application/json",source:"API",status:"uploading",createdAt:Date.now()},...a])},ex=async()=>{let t=a.current,s=null!=t?t:crypto.randomUUID();if(!D){ea({state:"error",message:"Add a JSON file before extracting."}),ei(!1);return}t||(a.current=s,K(e=>[{id:s,name:D.name,size:D.size,type:D.type||D.name.split(".").pop()||"file",source:"Local",status:"uploading",createdAt:Date.now()},...e]));try{var l,r,n,o;let t;let a=new FormData;a.append("file",D);let i=await fetch("/api/ingestion/upload",{method:"POST",body:a}),d=await i.json(),c=eg(d),u="file-upload:".concat(D.name),p=null!==(l=c.sourceIdentifier)&&void 0!==l?l:u,m=null!==(r=(0,A.Me)(c.sourceType,p,"file"))&&void 0!==r?r:"file";if(K(e=>e.map(e=>{var t,a,l;return e.id===s?{...e,status:i.ok?"success":"error",cleansedId:null!==(t=c.cleansedId)&&void 0!==t?t:e.cleansedId,backendStatus:null!==(a=c.status)&&void 0!==a?a:e.backendStatus,backendMessage:null!==(l=c.message)&&void 0!==l?l:e.backendMessage,sourceIdentifier:p,sourceType:m}:e})),!i.ok){ea({state:"error",message:null!==(n=c.message)&&void 0!==n?n:"Backend rejected the upload."}),ei(!1);return}let h={name:D.name,size:D.size,source:(0,A.VG)(m,"Local upload"),cleansedId:c.cleansedId,status:c.status,uploadedAt:Date.now(),sourceIdentifier:p,sourceType:m},x=null!==(o=c.cleansedId)&&void 0!==o?o:s,f=!1;if(x){let e=await ev(x,{mode:"local",metadata:h,rawJson:null!=M?M:void 0,tree:W,backendPayload:d});f=e.ok,t=e.snapshotId,e.ok||console.warn("Unable to cache extraction snapshot, falling back to session storage.",e.message)}let b=(0,k.Wq)({mode:"local",metadata:h,snapshotId:f?null!=t?t:x:void 0,tree:f?void 0:W,rawJson:f?void 0:null!=M?M:void 0,backendPayload:f?void 0:d});if(!b.ok){ea({state:"error",message:P(b)}),ei(!1);return}ea({state:"success",message:"Extraction ready. Redirecting..."}),ei(!1),e.push("/extraction")}finally{a.current=null}},ef=async()=>{if(!z.trim()){ea({state:"error",message:"Paste a JSON payload before extracting."}),ei(!1);return}let t=O(z);if(!t){ea({state:"error",message:"Payload must be valid JSON before submission."}),ei(!1);return}el({state:"loading"});let a=d.current,s=null!=a?a:crypto.randomUUID();a?K(e=>e.map(e=>e.id===s?{...e,size:z.length}:e)):(d.current=s,K(e=>[{id:s,name:"API payload",size:z.length,type:"application/json",source:"API",status:"uploading",createdAt:Date.now()},...e]));try{var l,r,n,o,i;let a;let d=await fetch("/api/ingestion/payload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:t})}),c=await d.json(),u=eg(c),p=null!==(l=u.cleansedId)&&void 0!==l?l:"api-payload:".concat(s),m=null!==(r=u.sourceIdentifier)&&void 0!==r?r:p,h=null!==(n=(0,A.Me)(u.sourceType,m,"api"))&&void 0!==n?n:"api";if(K(e=>e.map(e=>{var t,a,l;return e.id===s?{...e,status:d.ok?"success":"error",cleansedId:null!==(t=u.cleansedId)&&void 0!==t?t:e.cleansedId,backendStatus:null!==(a=u.status)&&void 0!==a?a:e.backendStatus,backendMessage:null!==(l=u.message)&&void 0!==l?l:e.backendMessage,sourceIdentifier:m,sourceType:h}:e})),el({state:d.ok?"success":"error",message:d.ok?"Payload accepted.":"Backend rejected the payload."}),!d.ok){ea({state:"error",message:null!==(o=u.message)&&void 0!==o?o:"Backend rejected the payload."}),ei(!1);return}let x=eu("API payload",t),f={name:"API payload",size:z.length,source:(0,A.VG)(h,"API payload"),cleansedId:u.cleansedId,status:u.status,uploadedAt:Date.now(),sourceIdentifier:m,sourceType:h},b=null!==(i=u.cleansedId)&&void 0!==i?i:s,g=JSON.stringify(t,null,2),v=!1;if(b){let e=await ev(b,{mode:"api",metadata:f,rawJson:g,tree:x,backendPayload:c});v=e.ok,a=e.snapshotId,e.ok||console.warn("Unable to cache API extraction snapshot, falling back to browser session storage.",e.message)}let y=(0,k.Wq)({mode:"api",metadata:f,snapshotId:v?null!=a?a:b:void 0,tree:v?void 0:x,rawJson:v?void 0:g,backendPayload:v?void 0:c});if(!y.ok){ea({state:"error",message:P(y)}),ei(!1);return}ea({state:"success",message:"Extraction ready. Redirecting..."}),ei(!1),e.push("/extraction")}finally{d.current=null}},eb=async()=>{var t,a,s,l;let r;let n=R.trim();if(!n){ea({state:"error",message:"Provide an s3://bucket/key (or classpath:) URI first."}),ei(!1);return}en({state:"loading"});let o=crypto.randomUUID();K(e=>[{id:o,name:n,size:0,type:"text/uri-list",source:"S3",status:"uploading",createdAt:Date.now()},...e]);let i=await fetch("/api/ingestion/s3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceUri:n})}),d=await i.json(),c=eg(d),u=null!==(t=c.sourceIdentifier)&&void 0!==t?t:n,p=null!==(a=(0,A.Me)(c.sourceType,u,"s3"))&&void 0!==a?a:"s3";if(K(e=>e.map(e=>{var t,a,s;return e.id===o?{...e,status:i.ok?"success":"error",cleansedId:null!==(t=c.cleansedId)&&void 0!==t?t:e.cleansedId,backendStatus:null!==(a=c.status)&&void 0!==a?a:i.ok?"ACCEPTED":e.backendStatus,backendMessage:null!==(s=c.message)&&void 0!==s?s:e.backendMessage,sourceIdentifier:u,sourceType:p}:e})),en({state:i.ok?"success":"error",message:i.ok?"Source accepted.":"Backend rejected the S3/classpath request."}),!i.ok){ea({state:"error",message:null!==(s=c.message)&&void 0!==s?s:"Backend rejected the request."}),ei(!1);return}let m={name:n,size:0,source:(0,A.VG)(p,"S3 / Cloud"),cleansedId:c.cleansedId,status:c.status,uploadedAt:Date.now(),sourceIdentifier:u,sourceType:p},h=null!==(l=c.cleansedId)&&void 0!==l?l:o,x=!1;if(h){let e=await ev(h,{mode:"s3",metadata:m,sourceUri:n,backendPayload:d});x=e.ok,r=e.snapshotId,e.ok||console.warn("Unable to cache S3 extraction snapshot, falling back to session storage metadata only.",e.message)}let f=(0,k.Wq)({mode:"s3",metadata:m,sourceUri:n,snapshotId:x?null!=r?r:h:void 0,backendPayload:x?void 0:d});if(!f.ok){ea({state:"error",message:P(f)}),ei(!1);return}ea({state:"success",message:"Extraction ready. Redirecting..."}),ei(!1),e.push("/extraction")},eg=e=>{var t,a,s,l,r,n,o,i,d,c,u;let p=null==e?void 0:e.body,m=null==e?void 0:e.rawBody,h=p&&"object"==typeof p&&!Array.isArray(p)?p:null,x=(null==h?void 0:h.metadata)&&"object"==typeof h.metadata?h.metadata:null,f=null!==(a=null!==(t=(0,A.Xl)(null==h?void 0:h.cleansedDataStoreId))&&void 0!==t?t:(0,A.Xl)(null==h?void 0:h.cleansedId))&&void 0!==a?a:(0,A.Xl)(null==h?void 0:h.id),b=(0,A.Xl)(null==h?void 0:h.status),g=e=>{let t=(0,A.Xl)(e);if(t)return t;if(e&&"object"==typeof e)for(let t of[e.error,e.message,e.detail,e.statusText,e.description]){let e=(0,A.Xl)(t);if(e)return e}},v=null!==(u=null!==(c=null!==(d=null!==(i=null!==(o=(0,A.Xl)(null==h?void 0:h.sourceIdentifier))&&void 0!==o?o:(0,A.Xl)(null==h?void 0:h.sourceUri))&&void 0!==i?i:(0,A.Xl)(null==x?void 0:x.sourceIdentifier))&&void 0!==d?d:(0,A.Xl)(null==x?void 0:x.sourceUri))&&void 0!==c?c:(0,A.Xl)(null==e?void 0:e.sourceIdentifier))&&void 0!==u?u:(0,A.Xl)(null==e?void 0:e.sourceUri),y=(0,A.Me)(null!==(s=(0,A.Xl)(null==h?void 0:h.sourceType))&&void 0!==s?s:(0,A.Xl)(null==x?void 0:x.sourceType),v);return{cleansedId:f,status:b,message:null!==(n=null!==(r=null!==(l=g(p))&&void 0!==l?l:g(null==e?void 0:e.error))&&void 0!==r?r:g(m))&&void 0!==n?n:"string"==typeof m?m:void 0,sourceIdentifier:v,sourceType:y}},ev=async(e,t)=>{if(!e)return{ok:!1,message:"Snapshot id is missing."};let a={...t,storedAt:Date.now()};try{let a=await fetch("/api/ingestion/context",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,payload:{...t,mode:t.mode,metadata:t.metadata,rawJson:t.rawJson,tree:t.tree,sourceUri:t.sourceUri,backendPayload:t.backendPayload}})});if(!a.ok){let e="Failed to cache extraction snapshot.";try{let t=await a.json();(null==t?void 0:t.error)&&(e=t.error)}catch(e){}throw Error(e)}return{ok:!0,snapshotId:e}}catch(r){var s;let t="local:".concat(e),l=await (0,N.T)(t,a);if(l.ok)return{ok:!0,snapshotId:t};return{ok:!1,message:null!==(s=l.message)&&void 0!==s?s:r instanceof Error?r.message:"Failed to cache extraction snapshot."}}},ey=e=>{K(t=>t.filter(t=>t.id!==e))},ew=async e=>{if(!e.cleansedId){window.alert("Download is available after the backend returns a cleansed ID.");return}Y(e.id);try{var t,a;let s=await fetch("/api/ingestion/resume/".concat(encodeURIComponent(e.cleansedId)),{method:"POST"}),l=await s.json();if(!s.ok)throw Error(null!==(a=null==l?void 0:l.error)&&void 0!==a?a:"Backend rejected the download request.");let r="object"==typeof l.body&&null!==l.body?JSON.stringify(l.body,null,2):"string"==typeof l.rawBody&&l.rawBody.trim()?l.rawBody:JSON.stringify(l,null,2),n=new Blob([r],{type:"application/json"}),o=(null===(t=e.name.split("/").pop())||void 0===t?void 0:t.replace(/[^\w.-]+/g,"_"))||"upload",i="".concat(o,"-").concat(e.cleansedId,".json"),d=URL.createObjectURL(n),c=document.createElement("a");c.href=d,c.download=i,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(d)}catch(e){console.error("Unable to download upload payload.",e),window.alert(e instanceof Error?e.message:"Unable to download this upload. Please try again later.")}finally{Y(t=>t===e.id?null:t)}},ej=e=>{_(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},ek=e=>e.map(e=>{var t;let a=!!(null===(t=e.children)||void 0===t?void 0:t.length),l=Z.has(e.id);return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-lg px-2 py-1.5",children:[a?(0,s.jsx)("button",{type:"button",onClick:()=>ej(e.id),className:"text-slate-500 transition hover:text-slate-800","aria-label":l?"Collapse section":"Expand section",children:l?(0,s.jsx)(u.A,{className:"size-4"}):(0,s.jsx)(p.A,{className:"size-4"})}):(0,s.jsx)("span",{className:"size-4"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-slate-900",children:e.label}),!a&&(0,s.jsx)("span",{className:"text-xs text-slate-500",children:e.path})]})]}),a&&l&&(0,s.jsx)("div",{className:"border-l border-slate-100 pl-4",children:ek(e.children)})]},e.id)});return(0,s.jsxs)(y.l,{currentStep:"ingestion",children:[(0,s.jsx)(w.F,{title:"Ingestion",description:"Upload local JSON files, paste API payloads, or reference cloud storage to kick off the pipeline."}),(0,s.jsxs)("main",{className:"mx-auto grid max-w-6xl gap-6 px-6 py-10 lg:grid-cols-[minmax(0,1.6fr)_minmax(0,1fr)]",children:[(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Ingestion"}),(0,s.jsx)("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Upload Files"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Drag and drop JSON, paste payloads, or point at S3/classpath URIs."})]}),(0,s.jsx)(C,{feedback:et})]}),(0,s.jsx)("div",{className:"mt-6 grid gap-3 sm:grid-cols-3",children:I.map(e=>(0,s.jsx)("button",{type:"button",disabled:e.disabled,onClick:()=>!e.disabled&&U(e.id),className:(0,g.A)("rounded-2xl border px-4 py-3 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/50",e.disabled?"border-dashed border-slate-200 text-slate-400":c===e.id?"border-slate-900 bg-slate-900/[0.04] shadow-[0_18px_35px_rgba(15,23,42,0.12)]":"border-slate-200 hover:border-slate-900/40"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(e.icon,{className:(0,g.A)("size-5 transition-colors",e.disabled?"text-slate-300":c===e.id?"text-slate-900":"text-slate-700")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]})},e.id))}),"local"===c&&(0,s.jsx)("div",{className:"mt-6 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center",children:(0,s.jsxs)("label",{htmlFor:"file-upload",onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),ep(e.dataTransfer.files)},className:"flex cursor-pointer flex-col items-center gap-4",children:[(0,s.jsx)(r.A,{className:"size-10 text-slate-900"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-slate-900",children:["Drag a JSON file here or"," ",(0,s.jsx)("span",{className:"underline decoration-slate-900/40",children:"browse"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Single-file uploads only. Max 50 MB."}),D&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["Selected: ",(0,s.jsx)("span",{className:"font-semibold text-slate-800",children:D.name})]})]}),(0,s.jsx)("input",{id:"file-upload",ref:t,type:"file",className:"sr-only",accept:".json,application/json",onChange:e=>ep(e.target.files)})]})}),"api"===c&&(0,s.jsxs)("div",{className:"mt-6 space-y-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,s.jsx)(o,{className:"size-5 text-slate-900"}),"POST /api/ingest-json-payload"]}),(0,s.jsx)("textarea",{value:z,onChange:e=>{J(e.target.value);let t=O(e.target.value);t&&(eu("API payload",t),el({state:"idle"}),eh(e.target.value.length))},rows:6,placeholder:'Paste JSON payload. Example: { "product": { "name": "Vision Pro" } }',className:"w-full rounded-xl border border-slate-200 bg-white p-3 text-sm text-slate-900 shadow-inner focus:border-indigo-500 focus:outline-none"}),(0,s.jsx)(C,{feedback:es})]}),"s3"===c&&(0,s.jsxs)("div",{className:"mt-6 space-y-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,s.jsx)(l.A,{className:"size-5 text-slate-900"}),"GET /api/extract-cleanse-enrich-and-store"]}),(0,s.jsx)("input",{value:R,onChange:e=>T(e.target.value),placeholder:"s3://my-bucket/path/to/file.json",className:"w-full rounded-xl border border-slate-200 bg-white p-3 text-sm text-slate-900 shadow-inner focus:border-indigo-500 focus:outline-none"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Accepts s3://bucket/key or classpath:relative/path references that the Spring Boot service can access."}),(0,s.jsx)(C,{feedback:er})]})]}),(0,s.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Upload History"}),(0,s.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,s.jsx)(m.A,{className:"pointer-events-none absolute left-3 top-2.5 size-4 text-slate-400"}),(0,s.jsx)("input",{type:"search",placeholder:"Search coming soon",className:"w-full cursor-not-allowed rounded-full border border-slate-200 bg-slate-50 py-2 pl-9 pr-3 text-sm text-slate-400",disabled:!0})]})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[0===G.length&&(0,s.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 py-10 text-center text-sm text-slate-500",children:"No uploads yet. Drop a JSON file to start the pipeline."}),G.map(e=>{let t=E[e.status],a=Q===e.id;return(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"rounded-2xl bg-white p-2 shadow-sm",children:(0,s.jsx)(h.A,{className:"size-5 text-slate-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:[new Date(e.createdAt).toLocaleString()," • ",e.source]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.cleansedId&&(0,s.jsx)("code",{className:"rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-600 shadow-inner",children:e.cleansedId}),(0,s.jsxs)("span",{className:(0,g.A)("inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold",t.className),children:[(0,s.jsx)("span",{className:(0,g.A)("size-2 rounded-full",t.dot)}),t.label]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>ew(e),disabled:a,className:(0,g.A)("rounded-full p-1 text-slate-900 transition hover:bg-slate-900/10",a&&"cursor-wait opacity-60"),title:"Download payload","aria-label":"Download payload",children:(0,s.jsx)(x.A,{className:"size-4"})}),(0,s.jsx)("button",{type:"button",onClick:()=>ey(e.id),className:"rounded-full p-1 text-slate-900 transition hover:bg-slate-900/10",title:"Delete entry","aria-label":"Delete entry",children:(0,s.jsx)(f.A,{className:"size-4"})})]})]})]},e.id)})]})]})]}),(0,s.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Preview"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Select Items"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Preview is read-only. All fields will be sent forward."})]}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-slate-600",children:[ec.length," fields"]})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5",children:[(0,s.jsx)(b.A,{className:"size-4 text-slate-500"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-600",children:X})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.A,{className:"pointer-events-none absolute left-3 top-2.5 size-4 text-slate-400"}),(0,s.jsx)("input",{type:"search",placeholder:"Search fields...",value:H,onChange:e=>q(e.target.value),className:"w-full rounded-2xl border border-slate-200 bg-slate-50 py-2 pl-9 pr-3 text-sm text-slate-900 focus:border-indigo-500 focus:bg-white focus:outline-none"})]}),(0,s.jsx)("div",{className:"mt-4 max-h-[420px] overflow-y-auto pr-2",children:0===ed.length?(0,s.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 py-10 text-center text-sm text-slate-500",children:"Upload a JSON payload to view its structure."}):(0,s.jsx)("div",{className:"space-y-3",children:ek(ed)})})]}),(0,s.jsxs)("div",{className:"mt-6 rounded-2xl bg-slate-50 p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-600",children:[(0,s.jsx)("span",{className:"font-semibold text-slate-800",children:"Fields:"}),ec.slice(0,6).map(e=>(0,s.jsx)("span",{className:"rounded-full bg-white px-3 py-1 font-semibold shadow-sm",children:e.label},e.id)),ec.length>6&&(0,s.jsxs)("span",{className:"rounded-full bg-white px-3 py-1 font-semibold shadow-sm",children:["+",ec.length-6," more"]})]}),(0,s.jsx)("button",{type:"button",onClick:em,disabled:eo,className:(0,g.A)("mt-4 w-full rounded-full bg-slate-900 py-2.5 text-sm font-semibold text-white transition hover:bg-black",eo&&"cursor-not-allowed opacity-60 hover:bg-slate-900"),children:eo?(0,s.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,s.jsx)(i.A,{className:"size-4 animate-spin"}),"Extracting…"]}):"Extract Data"})]})]})]})]})}},1330:(e,t,a)=>{"use strict";a.d(t,{C:()=>n,T:()=>r});let s="snapshots",l=()=>new Promise((e,t)=>{if(!window.indexedDB){t(Error("IndexedDB is not available in this environment."));return}let a=window.indexedDB.open("ExtractionSnapshots",1);a.onerror=()=>{var e;t(null!==(e=a.error)&&void 0!==e?e:Error("Failed to open IndexedDB."))},a.onupgradeneeded=()=>{let e=a.result;e.objectStoreNames.contains(s)||e.createObjectStore(s)},a.onsuccess=()=>{e(a.result)}}),r=async(e,t)=>{try{let a=await l();return await new Promise((l,r)=>{let n=a.transaction(s,"readwrite").objectStore(s).put(t,e);n.onsuccess=()=>l(),n.onerror=()=>{var e;return r(null!==(e=n.error)&&void 0!==e?e:Error("Failed to store snapshot."))}}),{ok:!0}}catch(e){return{ok:!1,message:e instanceof Error?e.message:"Failed to store snapshot in IndexedDB."}}},n=async e=>{try{let t=await l();return await new Promise((a,l)=>{let r=t.transaction(s,"readonly").objectStore(s).get(e);r.onsuccess=()=>{var e;return a(null!==(e=r.result)&&void 0!==e?e:null)},r.onerror=()=>{var e;return l(null!==(e=r.error)&&void 0!==e?e:Error("Failed to read snapshot."))}})}catch(e){return null}}},918:(e,t,a)=>{"use strict";a.d(t,{HW:()=>r,bZ:()=>l,hV:()=>n});let s=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{value:0};return a.value>=5e3?[]:Array.isArray(e)?e.slice(0,100).flatMap((e,r)=>{let n="[".concat(r,"]"),o=[...t,n].join(".");if(a.value+=1,a.value>=5e3)return[];let i=l(e,[...t,n],a);return[{id:o,label:n,path:o,type:Array.isArray(e)?"array":s(e)?"object":"value",children:i.length?i:void 0,value:Array.isArray(e)||s(e)?0===i.length?e:void 0:e}]}):s(e)?Object.entries(e).flatMap(e=>{let[r,n]=e;if(a.value>=5e3)return[];let o=[...t,r].join(".");a.value+=1;let i=l(n,[...t,r],a);return[{id:o,label:r,path:o,type:Array.isArray(n)?"array":s(n)?"object":"value",children:i.length?i:void 0,value:Array.isArray(n)||s(n)?0===i.length?n:void 0:n}]}):[]},r=e=>e.children&&0!==e.children.length?e.children.flatMap(e=>r(e)):[e],n=(e,t)=>{if(!t)return e;let a=t.toLowerCase(),s=e=>{let t=e.label.toLowerCase().includes(a);if(!e.children||0===e.children.length)return t?e:null;let l=e.children.map(s).filter(e=>!!e);return t||l.length>0?{...e,children:l.length?l:void 0}:null};return e.map(s).filter(e=>!!e)}},862:(e,t,a)=>{"use strict";a.d(t,{Vj:()=>o,cB:()=>n});let s="content-lake.upload-history.v1",l=e=>!!e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.source&&"string"==typeof e.status&&"number"==typeof e.createdAt,r=e=>Array.isArray(e)?e.filter(l).slice(0,25):[],n=()=>{try{let e=window.localStorage.getItem(s);if(!e)return[];return r(JSON.parse(e))}catch(e){return[]}},o=e=>{try{let t=e.slice(0,25);window.localStorage.setItem(s,JSON.stringify(t))}catch(e){}}},9335:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))})},8552:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},4826:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},6441:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},2471:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))})},8094:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},7451:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))})},7108:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"}))})},8715:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[550,995,441,517,358],()=>t(4423)),_N_E=e.O()}]);